<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <title>Simple markers</title>
    <style>
      html, body, #map-canvas {
        height: 100%;
        margin: 0px;
        padding: 0px
      }
    </style>
    <script src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&libraries=geometry"></script>
    <script src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer_compiled.js"></script>
        <script>
 var mapa;
function initialize() {


  var myLatlng = new google.maps.LatLng(40.19461,-8.41175);
  var mapOptions = {
    zoom: 12,
    center: myLatlng
  }
  var map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);
  mapa = map;
  /*
  $.ajax({
    url: "/api/distrito/Coimbra",
    type: "GET",
    dataType: 'json',
  }).success(function(data) {


    var infowindow = new google.maps.InfoWindow();

    var marker, i;
    var markers = [];

    var contentString = '<div id="content">'+
      '<div id="siteNotice">'+
      '</div>'+
      '<h1 id="firstHeading" class="firstHeading">%titulo%</h1>'+
      '<div id="bodyContent">'+
      '<p>%texto%</p>'+
      '</div>'+
      '</div>';

    for (i = 0; i < data.data.length; i++) {  
      marker = new google.maps.Marker({
        position: new google.maps.LatLng(data.data[i].gps.lat, data.data[i].gps.lng),
        map: map,
        title: data.data[i].nome
      });

      markers.push(marker);

      google.maps.event.addListener(marker, 'click', (function(marker, i) {
        return function() {
          infowindow.setContent(contentString.replace("%titulo%",data.data[i].nome).replace("%texto%",data.data[i].descricao));
          infowindow.open(map, marker);
        }
      })(marker, i));
    }

    var markerCluster = new MarkerClusterer(map, markers, {gridSize: 50, maxZoom: 15});
  });
*/
	var data = [[40.21379,-8.45202],[40.216456170257345,-8.39554904674135], [40.20453673861302,-8.394992358011622], [40.213395212205015,-8.388463854789734]];
	var poly = "_gmtFxwqr@EWJ}@AUHOH@XEXFJELiAHBN@JGVGd@DVAHK\\mC?SMQSSIMRWT_@b@l@j@|@bAl@p@P^Bl@BVFRVDX@lDFTHDn@CbD@vAXNDGb@W`BPlA^d@FZO`EA\\u@A_@E{AUeBg@K@ERO`B[|CYn@E`@IlCEHAD?@Q?[?u@JmADo@Qu@SuAWgAA{BX]BKCSUG{@G{BGkHCuVAoFGuC[gDKoAFm@^i@d@Eb@c@Lk@?e@QyBQi@]YICYu@e@iCc@iD?k@LmAF{@?{@Gu@a@_BkGeM{@yA_@_@i@Ww@U}A]k@Ug@_@wAaB_GiH{@eA_AuAs@{Ac@oAi@mCc@yD]cECgABsAH{@@]Ge@U_@SIy@iBoCoGk@aBI_@?C@YMe@OKGA_@c@O]WaAQ}@m@iD}AwIa@qCSkCJyF@aCKmBOiAa@aBq@mB}EcK]gA_@cCCoCBcANkAZ_CDiCQ_KHq@FIHOD_@KgAB_AFo@h@oCVq@bAgBpBgDz@kB`@{ARkA|@iKh@aHh@eLNwBj@aDbAaCZi@`AgAzBqBbAo@~@e@vAe@bVkFjBMl@@^Nl@JjBj@hB|@NRPDJEJS@WCOCG@g@Lk@OYCMBs@?e@CWMWEKAi@JmAVmBH_APq@Zy@N{@HmANe@Vi@RUpAy@R[Dw@KyBCqB@YAXBv@BfBDlBALFH^Jl@`@f@AROPY\\gAROt@Gj@BXHdBj@dEl@|BZnBnA^B|@SnAw@\\Gn@Gl@HZZ~CnE`@l@\\ZLDd@FxACpABzDzAl@`@~@fAfB~BDFAPEZa@rBWpAOx@GA_@_@Sg@KsAKGOBoA\\Q?MQIoAQSGECJAPGxAGv@TT`@L\\HBJI@o@?NA^@HAKQi@G[UGIBOFuAD}@BKFDFBLZBr@FXNHjAWXKJ@FJDz@Nl@`@f@JDk@bDu@hDw@nCM|@HtB@fAKdAKp@]t@IZS`CIh@i@l@IA]LGLgA@iAGcAQw@Wq@]oAs@qAm@MQOGIAq@k@gHqEmCiCiCyA{LqGqKuF{Am@k@MoASq@AgBFqB^_GnAkH|AgDv@cBx@}AhAcB~AeAnA}@bBk@jBa@tCu@nNg@zG{@lKStA[jAc@hAuDfGyAtDu@|Ck@jAE`@Dd@JRRN\\@ZQN]Be@CSGy@FeA\\wB\\gA\\w@vC}Ez@gBr@iCv@_Ir@aJ\\eH\\cGLyAVsAZiAb@aAdAcBhAiA`CoBlCmAfVoFbAO~@E";


	var decoded_path = google.maps.geometry.encoding.decodePath(poly);


    var infowindow = new google.maps.InfoWindow();
    //var directionsDisplay = new google.maps.DirectionsRenderer();
    //directionsDisplay.setMap(map);

    var marker;
    var markers = [];
    var a = 0;

    data.forEach(function(ponto){
    	marker = new google.maps.Marker({
	        position: new google.maps.LatLng(ponto[0], ponto[1]),
	        map: map,
	        title: a + ""
	    });

    	//markers.push(marker);
      	a++;
    });


    var line = new google.maps.Polyline({
          path: decoded_path,
          strokeColor: '#145283',
          strokeOpacity: 1.0,
          strokeWeight: 3
        });

    line.setMap(map);


    //var markerCluster = new MarkerClusterer(map, markers, {gridSize: 25, maxZoom: 15});


}

$( document ).ready(function() {

  google.maps.event.addDomListener(window, 'load', initialize);

});
    </script>
  </head>
  <body>
    <div id="map-canvas"></div>
  </body>
</html>